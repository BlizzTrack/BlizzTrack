import getBoundingClientRect from"../dom-utils/getBoundingClientRect.js";import getClippingRect from"../dom-utils/getClippingRect.js";import getDocumentElement from"../dom-utils/getDocumentElement.js";import computeOffsets from"./computeOffsets.js";import rectToClientRect from"./rectToClientRect.js";import{clippingParents,reference,popper,bottom,top,right,basePlacements,viewport}from"../enums.js";import{isElement}from"../dom-utils/instanceOf.js";import mergePaddingObject from"./mergePaddingObject.js";import expandToHashMap from"./expandToHashMap.js";export default function detectOverflow(e,t){void 0===t&&(t={});var o=t,n=o.placement,p=void 0===n?e.placement:n,r=o.boundary,i=void 0===r?clippingParents:r,m=o.rootBoundary,s=void 0===m?viewport:m,c=o.elementContext,l=void 0===c?popper:c,a=o.altBoundary,f=void 0!==a&&a,d=o.padding,g=void 0===d?0:d,u=mergePaddingObject("number"!=typeof g?g:expandToHashMap(g,basePlacements)),b=l===popper?reference:popper,j=e.elements.reference,v=e.rects.popper,O=e.elements[f?b:l],h=getClippingRect(isElement(O)?O:O.contextElement||getDocumentElement(e.elements.popper),i,s),C=getBoundingClientRect(j),x=computeOffsets({reference:C,element:v,strategy:"absolute",placement:p}),R=rectToClientRect(Object.assign(Object.assign({},v),x)),y=l===popper?R:C,E={top:h.top-y.top+u.top,bottom:y.bottom-h.bottom+u.bottom,left:h.left-y.left+u.left,right:y.right-h.right+u.right},P=e.modifiersData.offset;if(l===popper&&P){var T=P[p];Object.keys(E).forEach(function(e){var t=[right,bottom].indexOf(e)>=0?1:-1,o=[top,bottom].indexOf(e)>=0?"y":"x";E[e]+=T[o]*t})}return E};