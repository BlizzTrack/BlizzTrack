import{top,left,right,bottom}from"../enums.js";import getOffsetParent from"../dom-utils/getOffsetParent.js";import getWindow from"../dom-utils/getWindow.js";import getDocumentElement from"../dom-utils/getDocumentElement.js";import getComputedStyle from"../dom-utils/getComputedStyle.js";import getBasePlacement from"../utils/getBasePlacement.js";var unsetSides={top:"auto",right:"auto",bottom:"auto",left:"auto"};function roundOffsets(t){var e=t.x,o=t.y,s=window.devicePixelRatio||1;return{x:Math.round(e*s)/s||0,y:Math.round(o*s)/s||0}}export function mapToStyles(t){var e,o=t.popper,s=t.popperRect,a=t.placement,p=t.offsets,i=t.position,r=t.gpuAcceleration,n=t.adaptive,m=roundOffsets(p),l=m.x,c=m.y,f=p.hasOwnProperty("x"),g=p.hasOwnProperty("y"),u=left,d=top,O=window;if(n){var b=getOffsetParent(o);b===getWindow(o)&&(b=getDocumentElement(o)),a===top&&(d=bottom,c-=b.clientHeight-s.height,c*=r?1:-1),a===left&&(u=right,l-=b.clientWidth-s.width,l*=r?1:-1)}var j,y=Object.assign({position:i},n&&unsetSides);return r?Object.assign(Object.assign({},y),{},((j={})[d]=g?"0":"",j[u]=f?"0":"",j.transform=(O.devicePixelRatio||1)<2?"translate("+l+"px, "+c+"px)":"translate3d("+l+"px, "+c+"px, 0)",j)):Object.assign(Object.assign({},y),{},((e={})[d]=g?c+"px":"",e[u]=f?l+"px":"",e.transform="",e))};function computeStyles(t){var e=t.state,o=t.options,s=o.gpuAcceleration,a=void 0===s||s,p=o.adaptive,i=void 0===p||p,r={placement:getBasePlacement(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:a};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign(Object.assign({},e.styles.popper),mapToStyles(Object.assign(Object.assign({},r),{},{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:i})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign(Object.assign({},e.styles.arrow),mapToStyles(Object.assign(Object.assign({},r),{},{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1})))),e.attributes.popper=Object.assign(Object.assign({},e.attributes.popper),{},{"data-popper-placement":e.placement})}export default{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:computeStyles,data:{}};